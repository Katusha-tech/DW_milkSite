{% extends "base.html" %}
{% block content %}
<section id="orders" class="py-3 zigzag-section main-body"> <!-- py-3 вместо py-5, чтобы меньше отступов -->
    <div class="container-fluid px-4 px-md-5">
        <h2 class="text-center fw-bold mb-4 orders-title">Журнал Заявок</h2> <!-- фирменный цвет и меньше отступ -->
        
        <!-- Форма поиска -->
        <form class="row row-cols-lg-auto g-2 align-items-center mb-3">
  <div class="col-12">
    <div class="input-group">
      <span class="input-group-text" style="background-color: #fff; color: #265475;">
        <i class="bi bi-search"></i>
      </span>
      <input 
        type="text"
        class="form-control form-control-sm"
        name="search"
        placeholder="Введите текст"
        value="{{ request.GET.search|default:'' }}"
        style="max-width: 260px;"
      />
    </div>
  </div>
  <div class="col-12">
    <button type="submit" class="btn btn-sm" style="background-color: #265475; color: white;">
      Поиск
    </button>
  </div>
</form>




        <!-- Чекбоксы для выбора полей поиска -->
        <div class="row mb-3 search-checkbox">
            <div class="col-12">
                <div class="d-flex flex-wrap gap-2">
                    <div class="form-check">
                        <input 
                            class="form-check-input" 
                            type="checkbox" 
                            id="searchPhone"
                            name="search_in" 
                            value="phone" {% if 'phone' in request.GET.search_in %}checked{% endif %}
                        />
                        <label class="form-check-label" for="searchPhone">
                            <i class="bi bi-telephone me-1"></i> По телефону
                        </label>
                    </div>
                    <div class="form-check">
                        <input 
                            class="form-check-input" 
                            type="checkbox" 
                            id="searchName"
                            name="search_in" 
                            value="name" {% if not request.GET.search_in or 'name' in request.GET.search_in %}checked{% endif %}
                        />
                        <label class="form-check-label" for="searchName">
                            <i class="bi bi-person me-1"></i> По имени
                        </label>
                    </div>
                    <div class="form-check">
                        <input 
                            class="form-check-input" 
                            type="checkbox"
                            id="searchStatus" 
                            name="search_in" 
                            value="status" {% if 'status' in request.GET.search_in %}checked{% endif %}
                        />
                        <label class="form-check-label" for="searchStatus">
                            <i class="bi bi-chat me-1"></i> По статусу
                        </label>
                    </div>
                </div>
            </div>
        </div>

        <p class="text-muted orders-count">
            Всего заказов: <span class="badge bg-dark">{{ orders|length }}</span>
        </p>

        <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 g-3"> <!-- чуть меньше gap -->
            {% for order in orders %}
                {% include "core/includes/order_card_include.html" with order=order %}
            {% endfor %}
        </div>
    </div>
</section>
{% endblock %}
