{% load static %}
<nav class="navbar navbar-expand-lg shadow-sm main-body">
  <div class="container">
    <div class="d-flex w-100 justify-content-center align-items-center flex-wrap">

      {% comment %} Левая часть {% endcomment %}
      <ul class="navbar-nav flex-row align-items-center me-3 nav-left">
        <li class="nav-item px-1">
          <a class="nav-link nav-text" href="{% url 'landing' %}#main">Главная</a>
        </li>
        <li class="nav-item px-1">
          <a class="nav-link nav-text" href="{% url 'products' %}#products">Продукция</a>
        </li>
        <li class="nav-item px-1">
          <a class="nav-link nav-text" href="{% url 'about_milk' %}#aboutmilk">О молоке</a>
        </li>
        <li class="nav-item px-1">
          <a class="nav-link nav-text" href="{% url 'blog:posts_list' %}">Новости</a>
        </li>
      </ul>

      {% comment %} Центр: Название компании {% endcomment %}
      <div class="navbar-brand mx-2 d-flex flex-column align-items-center">
        <span class="company-name">МОЛОКО<span class="ampersand">&</span>ДОМ</span>
        <span class="company-tagline">«Раздели молочные мгновения»</span>
      </div>

      {% comment %} Правая часть {% endcomment %}
      <ul class="navbar-nav flex-row align-items-center ms-3 nav-right">
        <li class="nav-item px-1">
          <a class="nav-link nav-text" href="{% url 'delivery_payment' %}#delpay">Доставка и оплата</a>
        </li>
        <li class="nav-item px-1">
          <a class="nav-link nav-text" href="{% url 'orders_list' %}#orders">Заказы</a>
        </li>
        <li class="nav-item px-1">
          <a class="nav-link nav-text" href="{% url 'reviews' %}#reviews">Отзывы</a>
        </li>
        {% comment %} Блок с выпадающим меню регистрации {% endcomment %}
        <li class="nav-item dropdown px-1 nav-item">
          <a class="nav-link nav-text dropdown-toggle d-flex align-items-center" href="#" id="userDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            <i class="bi bi-person-circle fs-5 me-1"></i>
            {% if user.is_authenticated %}
              {{ user.username|capfirst }}
            {% else %}
                Вход
            {% endif %}
          </a>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userDropdown">
            {% if user.is_authenticated %}
            {% if user.is_staff %}
            <li class="nav-item px-1">
              <a class="dropdown-item text-danger nav-link nav-text" href="/admin/">
                <i class="bi bi-shield-lock me-1"></i> Админка
              </a>
            </li>
            <li><hr class="dropdown-divider"></li>
            {% endif %}
            <li class="nav-item px-1">
              <a class="dropdown-item nav-link nav-text" href="{% url 'users:profile_detail' pk=user.pk %}">
                <i class="bi bi-person me-1"></i> Профиль
              </a>
            </li>
            <li class="nav-item px-1">
              <form method="post" action="{% url 'users:logout' %}" class="d-inline nav-text">
                {% csrf_token %}
                <button type="submit" class="dropdown-item nav-text">
                    <i class="bi bi-box-arrow-right me-1"></i> Выйти
                </button>
              </form>
            </li>
            {% else %}
            <li class="nav-item px-1">
              <a class="dropdown-item nav-text" href="/admin/login/">
                <i class="bi bi-house-door me-1 text-danger"></i> Вход в админку
              </a>
            </li>
            <li class="nav-item px-1">
              <a class="dropdown-item nav-text" href="{% url 'users:login' %}">
                <i class="bi bi-box-arrow-in-right me-1"></i> Войти
              </a>
            </li>
            <li class="nav-item px-1">
              <a class="dropdown-item nav-text" href="{% url 'users:register' %}">
                <i class="bi bi-person-plus me-1"></i> Зарегистрироваться
              </a>
            </li>
            {% endif %}
          </ul>
        </li>
      </ul>
    </div>
  </div>
</nav>
